{% extends 'master.html' %}

{% block css %}
    <link rel="stylesheet" href="/static/css/mycss/host_operate.css">
{% endblock %}

{% block content %}
    <div class="ibox float-e-margins">
    <div class="ibox-content">
        <div class="row row-lg">
            <div class="col-sm-6">
                <!-- Example Basic Sort -->
                <div class="host-wrap">
                    <div class="host-operation-heading">
                        <span class="host-title">主机列表</span>
                        <span>请选择需要执行剧本的主机</span>
                        <button type="button" class="btn btn-primary">按组筛选</button>
                        <button type="button" class="btn btn-warning">选择 >></button>
                    </div>
                    <div>
                        <table class="table table-striped table_host">
                            <thead>
                            <tr>
                                <th data-field="Tid" data-sortable="true">序号</th>
                                <th data-field="First" data-sortable="true">主机ID</th>
                                <th data-field="sex" data-sortable="true">IP地址</th>
                                <th data-field="sex" data-sortable="true">所在地</th>
                                <th data-field="sex" data-sortable="true">状态</th>
                            </tr>
                            </thead>

                            <tbody>
                            {% for row in data.minion_list %}
                                <tr>
                                    <td>{{ forloop.counter }}</td>
                                    <td>{{ row.id }}</td>
                                    <td>{{ row.ipv4 }}</td>
                                    <td>{{ row.city }}</td>
                                    {% if row.status == 0 %}
                                    <td style="color: red">离线</td>
                                    {% elif row.status == 1 %}
                                    <td style="color: green">在线</td>
                                    {% elif row.status == 2 %}
                                    <td style="color: deepskyblue">检测中</td>
                                    {% else %}
                                    <td>异常</td>
                                    {% endif %}
                                </tr>

                            {% endfor %}
                            </tbody>

                        </table>
                    </div>
                </div>
                <!-- End Example Basic Sort -->
            </div>

            <div class="col-sm-6">
                <!-- Example Format Sort -->
                <div>
                    <div class="host-operation-heading">
                        <span>已选择的主机</span>
                        <button type="button" class="btn btn-warning"><< 移除</button>
                        <button type="button" class="btn btn-danger">清空所选</button>
                    </div>
                    <div>
                        <table class="table table-striped table_host">
                            <thead>
                            <tr>
                                <th data-field="name" data-formatter="nameFormatter">名称</th>
                                <th data-field="star" data-formatter="starsFormatter">Star</th>
                                <th data-field="license">许可</th>
                                <th data-field="url">地址</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>{{ forloop.counter }}</td>
                                <td>2</td>
                                <td>3</td>
                            </tr>
                            <tr>
                                <td>1</td>
                                <td>2</td>
                                <td>3</td>
                            </tr>
                            <tr>
                                <td>1</td>
                                <td>2</td>
                                <td>3</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <!-- End Example Format Sort -->
            </div>

            <div class="clearfix hidden-xs"></div>

            <div class="col-sm-6">
                <!-- Example Custom Sort -->
                <div>
                    <div class="host-operation-heading">
                        <span>剧本列表</span>
                        <span>选择需要执行的剧本</span>
                        <button type="button" class="btn btn-success">开始执行</button>
                    </div>
                    <div>
                        <table class="table table-striped table_host">
                            <thead>
                            <tr>
                                <th data-field="Tid" data-align="center" data-sortable="true">序号</th>
                                <th data-field="First" data-align="left" data-sortable="true">剧本</th>
                                <th data-field="Score" data-sortable="true" data-sorter="scoreSorter">所在组</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for row in data.playbook_list %}
                            <tr>
                                <td>{{ forloop.counter }}</td>
                                <td>{{ row.description }}</td>
                                <td>{{ row.project }}</td>
                            </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
                <!-- End Example Custom Sort -->
            </div>

            <div class="col-sm-6">
                <!-- Example Hide Header -->
                <div>
                    <div class="host-operation-heading">
                        <span>剧本执行任务日志</span>
                    </div>
                    <div>
                        <table class="table table-striped table_host">
                            <thead>
                            <tr>
                                <th data-field="Tid">序号</th>
                                <th data-field="First">任务 ID</th>
                                <th data-field="sex">任务描述</th>
                                <th data-field="Score">开始时间</th>
                                <th data-field="Score">结束时间</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for row in data.jobs_list %}
                            <tr>
                                <td>{{ forloop.revcounter }}</td>
                                <td>{{ row.jid }}</td>
                                <td>{{ row.description }}</td>
                                <td>{{ row.creationtime|date:"H:i:s" }}</td>
                                {% if row.completiontime == None %}
                                <td style="color: deepskyblue">执行中</td>
                                {% else %}
                                <td style="color: green">{{ row.completiontime|date:"H:i:s" }}</td>
                                {% endif %}
                            </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
                <!-- End Example Hide Header -->
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block js %}
    <script src="/static/js/host_operate.js"></script>
{% endblock %}