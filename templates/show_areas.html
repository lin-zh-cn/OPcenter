{% extends 'master.html' %}

{% block css %}
    <link rel="stylesheet" href="/static/css/mycss/index.css">
    <link rel="stylesheet" href="/static/css/mycss/show_areas.css">
{% endblock %}

{% block content %}
        <!--右侧部分开始-->
            <div class="row J_mainContent animated fadeInRight" id="content-main">
                <!-- 头部横条 -->
                <div class="ibox-title">
                    <div class="pull-left btns">
                        <button type="button" class="btn btn-outline btn-info" data-toggle="modal" data-target="#myModal"><a href="#">新增</a></button>
                        <button type="button" class="btn btn-outline btn-danger" data-toggle="modal" data-target="#delModal"><a href="#">删除</a></button>
                        <button type="button" class="btn btn-outline btn-warning" data-toggle="modal" data-target="#myModal"><a href="#">修改</a></button>
                    </div>
                    <div class="pull-right">
                        <div class="select_area">
                            <div class="btn-group select_btn1">
                                <button data-toggle="dropdown" class="btn btn-primary dropdown-toggle ">选择域名 <span class="caret"></span>
                                </button>
                                <ul class="dropdown-menu dropdown-menu-my">
                                {% for k,y in project_list.items %}
                                  <li><a href="#">{{ k }}</a>
                                        <ul class="third-menu">
                                        {% for i in y %}
                                          <li>
                                            <a href="/webmoni/{{ i.id }}/">{{ i.url }}</a>
                                          </li>
                                        {% endfor %}
                                        </ul>
                                      </li>
                                    {% endfor %}
                                </ul>
                            </div>
                        </div>
                        <form role="search" method="post" action="#">
                            <div class="form-group">
                                <input type="search" placeholder="请输入您需要查找的内容 …" class="form-control" name="top-search" id="inputSearch">
                            </div>
                            <button type="submit" class="btn btn-primary confirm" >确定</button>
                        </form>
                    </div>                                
                </div>
                <!-- echarts图表 -->
                <div class="row ">
                    <div class="col-sm-6">
                        <div class="ibox float-e-margins">
                            <div class="ibox-title">
                                <div class="pull-left">
                                    <h5 >地图展示</h5>
                                </div>            
                            </div>
                            <div class="ibox-content">
                                <div style="height:400px" id="container-left"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="ibox float-e-margins">
                            <div class="ibox-title">
                                <div class="pull-left">
                                    <h5 >数据展示</h5>
                                </div>                  
                            </div>
                            <div class="ibox-content">
                                <div style="height:400px" id="container-right"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- 表格部分 -->
                <div class="tableArea">
                  <table class="table table-striped table-bordered col-xs-12">
                    <thead>
                        <tr>
                            <th>域名</th>
                            <th>区域</th>
                            <th>响应码</th>
                            <th>域名解析</th>
                            <th>建立连接</th>
                            <th>准备传输</th>
                            <th>传输开始</th>
                            <th>传输结束</th>
                            <th>数据包大小</th>
                            <th>HTTP头部大小</th>
                            <th>平均下载速度</th>

                        </tr>
                    </thead>
                    <tbody id="content">
                    {% for k,y in defaultDomainData.items %}
                        <tr>
                        {% for i in y %}
                            <td><a href="#">{{ k }}</a></td>
                            <td>北京</td>
                            <td>{{ i.http_code }}</td>
                            <td>{{ i.namelookup_time }}ms</td>
                            <td>{{ i.connect_time }}ms</td>
                            <td>{{ i.pretransfer_time }}ms</td>
                            <td>{{ i.starttransfer_time }}ms</td>
                            <td>{{ i.total_time }}ms</td>
                            <td>{{ i.size_download }}byte</td>
                            <td>{{ i.header_size }}byte</td>
                            <td>{{ i.speed_download }}byte</td>
                        {% endfor %}
                        </tr>
                    {% endfor %}
                    </tbody>
                  </table>
                  <nav aria-label="Page navigation">
                      <ul class="pagination pull-right">
                          <li>
                              <a href="#" aria-label="Previous">
                                  <span aria-hidden="true">&laquo;</span>
                              </a>
                          </li>
                          <li><a href="#">1</a></li>
                          <li><a href="#">2</a></li>
                          <li><a href="#">3</a></li>
                          <li><a href="#">4</a></li>
                          <li><a href="#">5</a></li>
                          <li>
                              <a href="#" aria-label="Next">
                                <span aria-hidden="true">&raquo;</span>
                              </a>
                          </li>
                      </ul>
                  </nav>
                </div>
            </div>

            <!-- 新增和修改按钮的模态框 -->
            <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                      &times;
                    </button>
                    <h4 class="modal-title" id="myModalLabel">
                      编辑内容
                    </h4>
                  </div>
                  <form action="#">
                    <div class="modal-body modalAdd">
                      <div class="input-group">
                        <button data-toggle="dropdown" class="btn btn-primary dropdown-toggle input-group-addon" id="itemChoice">选择项目<span class="caret"></span>
                        </button>
                        <input type="text" class="form-control" placeholder="请输入项目名称" id="itemInput" autofocus>
                        <ul class="dropdown-menu">
                          <li class="dropdown-item"><a href="#">游戏</a>
                          </li>
                          <li class="dropdown-item"><a href="#">论坛</a>
                          </li>
                          <li class="dropdown-item"><a href="#">主页</a>
                          </li>
                          <li><a href="#" id="itemAdd">新增项目名称</a>
                          </li>
                        </ul>
                        <input type="text" class="form-control domain_name" placeholder="请输入要添加的域名(双击切换为文本域)" id="itemDetail" aria-describedby="basic-addon1">
                        <textarea name="textarea" placeholder="请输入要添加的域名..." id="" cols="30" rows="10"></textarea>
                      </div>
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                      </button>
                      <button type="button" class="btn btn-primary">
                        保存
                      </button>
                    </div>
                  </form>
                </div><!-- /.modal-content -->
              </div><!-- /.modal -->
            </div>
            <!-- 删除按钮的模态框 -->
            <div class="modal fade" id="delModal" tabindex="-1" role="dialog" aria-labelledby="delModalLabeldel" aria-hidden="true">
                <div class="modal-dialog delbtn">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                            <h4 class="modal-title" id="delModalLabel">确认删除？</h4>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                            <button type="button" class="btn btn-primary">确认</button>
                        </div>
                    </div><!-- /.modal-content -->
                </div><!-- /.modal-dialog -->
            </div>


            <!-- 右下角版权标识 -->
            <div class="footer">
                <div class="pull-right">&copy; 2016-2018 <a href="#" target="_blank">TS网络监控</a>
                </div>
            </div>
        <!--右侧部分结束-->
    <!-- echarts依赖项 -->
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/echarts.min.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts-gl/echarts-gl.min.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts-stat/ecStat.min.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/extension/dataTool.min.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/map/js/china.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/map/js/world.js"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=ZUONbpqGBsYGXNIYHicvbAbM"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/extension/bmap.min.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/simplex.js"></script>
    <!-- echarts图表-左边 -->
    <script>
    var dom = document.getElementById("container-left");
    var myChart = echarts.init(dom);
    var app = {};
    option = null;
    // 随机生成1000以内的整数 用来模拟数据
    function randomData() {
    return Math.round(Math.random()*1000);
    }

    option = {
    title: {
        text: '区域概览',
        subtext: '网站区域服务质量检测',
        left: 'center'
    },
    tooltip: {
        trigger: 'item',
        // formatter: function(params) {
        //     return params.name + '：' + params.data['value'] + '%'
        // },
    },
    legend: {
        orient: 'vertical',
        left: 'left',
        data:['iphone6','iphone7','iphoneX']
    },
    visualMap: {
        min: 0,
        max: 1000,
        left: 'left',
        top: 'bottom',
        text: ['高','低'],           // 文本，默认为数值文本
        calculable: true,
        inRange:{
            color:['#99ffcc','#d00000']
        }
    },
    toolbox: {
        show: true,
        orient: 'vertical',
        left: 'right',
        top: 'center',
        feature: {
            dataView: {readOnly: false},
            restore: {},
            saveAsImage: {}
        }
    },
    series: [
        {
            name: '北京',
            type: 'map',
            mapType: 'china',
            label: {
                normal: {
                    show: false
                },
                emphasis: {
                    show: true
                }
            },
            data:[
                {name: '北京',value: 50 },
            ]
        }
    ]
    };
    if (option && typeof option === "object") {
    myChart.setOption(option, true);
    }
    </script>
    <!-- echarts图表-右边 -->
    <script>
      var dom = document.getElementById("container-right");
      var myChart = echarts.init(dom);
      var app = {};
      option = null;
      option = {
          xAxis: {
              type: 'category',
              data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']
          },
          yAxis: {
              type: 'value'
          },
          series: [{
              data: [820, 932, 901, 934, 1290, 1330, 1320],
              type: 'line',
              smooth: true
          }]
      };

      if (option && typeof option === "object") {
          myChart.setOption(option, true);
      }
    </script>
{% endblock %}

{% block js %}
    <script src="/static/js/index.js"></script>
    <script src="/static/js/show_areas.js"></script>
{% endblock %}